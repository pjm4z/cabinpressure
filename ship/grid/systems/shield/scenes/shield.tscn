[gd_scene load_steps=17 format=3 uid="uid://djyu6c4yahmry"]

[ext_resource type="Script" path="res://ship/grid/systems/shield/scripts/Shield.cs" id="1_n7rtc"]
[ext_resource type="Texture2D" uid="uid://bn76f5j7bgg6e" path="res://misc/assets/icon.svg" id="2_gkkkg"]
[ext_resource type="Script" path="res://ship/grid/systems/shield/scripts/ShieldArea.cs" id="2_wd1cg"]
[ext_resource type="Script" path="res://ship/grid/systems/shield/scripts/ShieldBarrier.cs" id="3_ub6mx"]
[ext_resource type="Texture2D" uid="uid://1yvha85dwiaf" path="res://circle.png" id="4_fdxig"]
[ext_resource type="Script" path="res://game/state/systems/shield/scripts/ShieldOccupied.cs" id="4_l3l85"]
[ext_resource type="Script" path="res://shieldsprite.cs" id="5_mt6lo"]
[ext_resource type="Script" path="res://game/state/base/scripts/StateMachine.cs" id="6_180st"]
[ext_resource type="Script" path="res://game/state/systems/shield/scripts/ShieldActive.cs" id="6_nb1q5"]
[ext_resource type="Script" path="res://game/state/systems/base/scripts/SysIdle.cs" id="7_lsbnl"]
[ext_resource type="Script" path="res://game/state/systems/base/scripts/Overloaded.cs" id="7_mtquk"]
[ext_resource type="Script" path="res://game/state/systems/base/scripts/Queued.cs" id="8_7oqru"]
[ext_resource type="Script" path="res://Label2.cs" id="12_wekpj"]

[sub_resource type="CircleShape2D" id="CircleShape2D_1y4v3"]
radius = 400.0

[sub_resource type="PhysicsMaterial" id="PhysicsMaterial_xbkwp"]
friction = 0.0
bounce = 1.0

[sub_resource type="RectangleShape2D" id="RectangleShape2D_8c3qo"]
size = Vector2(16, 16)

[node name="shield" type="Area2D"]
rotation = 3.14159
collision_layer = 0
collision_mask = 0
script = ExtResource("1_n7rtc")

[node name="brain" type="Node" parent="." node_paths=PackedStringArray("startState", "parent")]
script = ExtResource("6_180st")
startState = NodePath("idle")
parent = NodePath("..")

[node name="idle" type="Node" parent="brain" node_paths=PackedStringArray("queued", "occupied", "executing")]
script = ExtResource("7_lsbnl")
queued = NodePath("../queued")
occupied = NodePath("../occupied")
executing = NodePath("../executing")

[node name="occupied" type="Node" parent="brain" node_paths=PackedStringArray("idle", "executing")]
script = ExtResource("4_l3l85")
idle = NodePath("../idle")
executing = NodePath("../executing")

[node name="queued" type="Node" parent="brain" node_paths=PackedStringArray("idle", "occupied")]
script = ExtResource("8_7oqru")
idle = NodePath("../idle")
occupied = NodePath("../occupied")

[node name="executing" type="Node" parent="brain" node_paths=PackedStringArray("idle", "occupied", "overloaded")]
script = ExtResource("6_nb1q5")
idle = NodePath("../idle")
occupied = NodePath("../occupied")
overloaded = NodePath("../overloaded")

[node name="overloaded" type="Node" parent="brain" node_paths=PackedStringArray("idle", "executing")]
script = ExtResource("7_mtquk")
idle = NodePath("../idle")
executing = NodePath("../occupied")

[node name="area" type="Area2D" parent="."]
script = ExtResource("2_wd1cg")

[node name="sprite" type="Sprite2D" parent="area"]
process_mode = 3
modulate = Color(1, 1, 1, 0.207843)
scale = Vector2(1.3, 1.3)
texture = ExtResource("4_fdxig")
script = ExtResource("5_mt6lo")

[node name="shape" type="CollisionShape2D" parent="area"]
shape = SubResource("CircleShape2D_1y4v3")

[node name="barrier" type="RigidBody2D" parent="." node_paths=PackedStringArray("barrier")]
collision_layer = 32
collision_mask = 32
mass = 0.001
physics_material_override = SubResource("PhysicsMaterial_xbkwp")
gravity_scale = 0.0
angular_damp = 100.0
script = ExtResource("3_ub6mx")
barrier = [NodePath("q1"), NodePath("q2"), NodePath("q3"), NodePath("q4")]

[node name="q1" type="CollisionPolygon2D" parent="barrier"]
position = Vector2(-400, 0)
polygon = PackedVector2Array(0, 0, 14, 103, 54, 201, 117, 283, 200, 347, 296, 387, 400, 400, 402, 398, 298, 385, 202, 345, 119, 281, 56, 199, 16, 101, 2, -2)

[node name="q2" type="CollisionPolygon2D" parent="barrier"]
position = Vector2(0, -400)
rotation = 1.5708
polygon = PackedVector2Array(0, 0, 14, 103, 54, 201, 117, 283, 200, 347, 296, 387, 400, 400, 402, 398, 298, 385, 202, 345, 119, 281, 56, 199, 16, 101, 2, -2)

[node name="q3" type="CollisionPolygon2D" parent="barrier"]
position = Vector2(400, 0)
rotation = -3.14159
polygon = PackedVector2Array(0, 0, 14, 103, 54, 201, 117, 283, 200, 347, 296, 387, 400, 400, 402, 398, 298, 385, 202, 345, 119, 281, 56, 199, 16, 101, 2, -2)

[node name="q4" type="CollisionPolygon2D" parent="barrier"]
position = Vector2(0, 400)
rotation = -1.5708
polygon = PackedVector2Array(0, 0, 14, 103, 54, 201, 117, 283, 200, 347, 296, 387, 400, 400, 402, 398, 298, 385, 202, 345, 119, 281, 56, 199, 16, 101, 2, -2)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("RectangleShape2D_8c3qo")

[node name="sprite" type="Sprite2D" parent="."]
process_mode = 3
modulate = Color(1, 1, 1, 0.207843)
scale = Vector2(-0.131108, -0.133653)
texture = ExtResource("2_gkkkg")
script = ExtResource("5_mt6lo")

[node name="joint" type="GrooveJoint2D" parent="."]
rotation = -0.942478
node_b = NodePath("../barrier")
length = 1.0
initial_offset = 1.0

[node name="Label" type="Label" parent="." node_paths=PackedStringArray("shield")]
offset_left = 31.0
offset_top = -12.9999
offset_right = 93.0
offset_bottom = 10.0001
rotation = 3.14159
script = ExtResource("12_wekpj")
shield = NodePath("..")

[node name="Node" type="Node" parent="."]

[connection signal="area_entered" from="area" to="area" method="_on_area_entered"]
[connection signal="body_entered" from="area" to="area" method="_on_body_entered"]
[connection signal="body_shape_entered" from="area" to="area" method="_on_body_shape_entered"]
